### 3.5.9 应当忽略所有ICMP请求

**级别：** 建议

**适用版本：** 全部

**规则说明：**

通过忽略所有ICMP请求，禁止外界通过 PING 命令访问系统。

攻击者可以通过ping命令的返回来感知系统所处的网址位置。

**规则影响：**

系统忽略所有ICMP请求。

**检查方法：**

输入以下命令并检查相应的命令返回是否为1：

```bash
# sysctl net.ipv4.icmp_echo_ignore_all
net.ipv4.icmp_echo_ignore_all = 1
# grep "net.ipv4.icmp_echo_ignore_all" /etc/sysctl.conf /etc/sysctl.d/*
net.ipv4.icmp_echo_ignore_all = 1
```

**修复方法：**

输入命令禁止转发ICMP重定向报文：

```bash
# sysctl -w net.ipv4.icmp_echo_ignore_all=1
```

修改/etc/sysctl.conf文件，添加或修改配置：

```bash
net.ipv4.icmp_echo_ignore_all = 1
```