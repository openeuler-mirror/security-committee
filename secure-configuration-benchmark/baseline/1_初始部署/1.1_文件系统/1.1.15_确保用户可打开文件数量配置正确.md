### 1.1.15 确保用户可打开文件数量配置正确

**级别：** 要求

**适用版本：** 全部

**规则说明：** 

在Linux系统中可以打开的文件个数是有限制的，如果全部资源被某个用户全部占用，其他用户将无法正常打开文件。

openEuler默认限制每个用户最多打开文件句柄数为1024，超过这个数会禁止打开新文件句柄。普通用户可以修改该值，但上限不能超过openEuler的默认上限524288，root管理员可以修改该上限值，没有限制。用户需要根据自身业务特点，设置合理的数值，防止单个用户的所有进程打开过多的文件句柄，耗尽系统资源。

**规则影响：**

无

**检查方法：**

* 查看当前限制值：

  ```bash
  # ulimit -Sn
  1024
  ```

* 查看普通用户可修改的上限值：

  ```bash
  # ulimit -Hn
  524288
  ```

**修复方法：**

* 可以使用ulimit命令进行临时设置。

  普通用户设置上限2000：

  ```bash
  $ ulimit -Sn 2000
  ```

  普通用户设置上限最大值10000，设置完成后，再调用-Sn参数设置上限，最大只能到10000：

  ```bash
  $ ulimit -Hn 10000
  ```

  同时设置上限和上限最大值：

  ```bash
  $ ulimit -n 30000
  ```

  root用户设置上限以及上限最大值的方法同普通用户一样，但root用户可以将上限最大值设置为大于openEuler默认值524288：

  ```bash
  # ulimit -Hn 1000000
  # ulimit -Hn
  1000000
  ```